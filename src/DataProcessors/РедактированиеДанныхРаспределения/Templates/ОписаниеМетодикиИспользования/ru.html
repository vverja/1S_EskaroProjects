<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link href="__STYLE__" type="text/css" rel="stylesheet"></link><meta content="MSHTML 6.00.6000.16788" name="GENERATOR"></meta></head><body>
<h1 class="">Методика использования обработки «<a href="DataProcessor.РедактированиеДанныхРаспределения/Help">Редактирование данных распределения</a>»</h1>
<p class="Usual">Для использования обработки необходимо:</p>
<ol><li>
<div class="">Разработать и передать обработке схему компоновки данных, позволяющую выводить подлежащие редактированию данные и, при необходимости, дополнительную информацию.</div>
</li><li>
<div class="">Указать назначение полей схемы компоновки данных:</div>
<ul><li>
<div class="">в табличной части РедактируемыеПоля указать перечень редактируемых числовых полей </div>
</li><li>
<div class="">в табличной части ОпциональныеПоля указать перечень полей, которые не должны использоваться, если данных для их заполнения в редактируемой таблице значений нет</div>
</li><li>
<div class="">в табличной части ЗависимыеПоля указать перечень полей, значения которых определяются значениями других полей. Это позволит удалять малозначащие для пользователя поля без потери данных табличной части документа. Примеры таких полей: ЕдиницаИзмерения и Коэффициент, их значения могут определяться Номенклатурой.</div></li></ul></li><li>
<div class="">Передать обработке таблицу значений для редактирования (реквизит ТаблицаДляРедактирования).</div>
</li><li>
<div class="">Указать значение реквизита ИдентификаторДляСохраненияНастроек. Обработка позволяет сохранять различные настройки отображения по переданной схеме компоновки данных и назначать их пользователям. Настройки сохраняются в справочнике «<a href="Catalog.СохраненныеНастройки/Help">Сохраненные настройки</a>».</div>
</li><li>
<div class="">При необходимости указать значения реквизитов ЗаголовокФормы (отображаемый на форме заголовок) и ТолькоПросмотр (позволяет открывать форму для настраиваемого отображения данных без возможности их изменения).</div>
</li><li>
<div class="">Обработать результат редактирования (варианты приведены в разделе <a href="DataProcessor.РедактированиеДанныхРаспределения/Help#ПримерыИспользования">«Примеры использования обработки»</a>).</div></li></ol><p class="Usual">Схема компоновки данных должна содержать набор данных-объект с именем объекта ИсходныеДанныеТаблицы. Состав полей набора данных должен соответствовать составу колонок переданной для редактирования таблицы. Ресурсы схемы компоновки данных должны содержать все редактируемые поля.</p>
<h2 class=""><a name="ПримерыИспользования">Примеры использования обработки для редактирования данных о распределении в табличной части документа</a></h2>
<h3 class="">Вариант 1: использование формы обработки «Редактирование данных распределения»</h3>
<ol><li>
<div class="">В объект, данные которого должны редактироваться, добавляется макет: схема компоновки данных для представления редактируемых данных.</div>
</li><li>
<div class="">При необходимости добавляется макет оформления данных (если требуется оформление, отличающееся от предусмотренного макетом оформления обработки).</div>
</li><li>
<div class="">
<div class="">Описываются действия, необходимые для начала редактирования:</div></div>
<ol><li>Создается объект обработки «Редактирование данных распределения» 
</li><li>На основе редактируемых данных подготавливается таблица значений для редактирования. Таблица может быть модифицирована для более удобного представления в виде кросс-таблицы. Например, одинаковая номенклатура может быть приведена к одинаковой единице измерения. 
</li><li>Устанавливаются параметры обработки (значения реквизитов и данные табличных частей, описанных выше). 
</li><li>Открывается <a href="DataProcessor.РедактированиеДанныхРаспределения.Form.Редактирование/Help">форма «Редактирование»</a> обработки «Редактирование данных распределения»</li></ol></li><li>При окончании редактирования форма «Редактирование» посылает оповещение вызвавшей её форме и передает в неё таблицу значений с результатом редактирования. Форма объекта, данные которого редактируются, должна обработать это оповещение.</li></ol><h3 class="">Вариант 2: разработка внешней обработки заполнения</h3>
<ol><li>
<div class="">Разрабатывается <a href="Catalog.ВнешниеОбработки/Help">внешняя обработка заполнения табличной части</a>, подключаемая к объекту. Изменения в конфигурацию не вносятся.</div>
</li><li>
<div class="">Схема компоновки данных, макет оформления данных помещаются в макеты внешней обработки.</div>
</li><li>
<div class="">Обработка содержит форму, в которой выполняется редактирование данных. Основой для разработки формы может являться форма «Редактирование» обработки «Редактирование данных распределения», её можно скопировать во внешнюю обработку. Основной реквизит формы должен иметь тип ОбработкаОбъект.РедактированиеДанныхРаспределения</div>
</li><li>
<div class="">Метод Инициализировать() внешней обработки должен </div>
<ol><li>
<div class="">выполнять действия, необходимые для начала редактирования (см. пункты 1-3 варианта 1)</div>
</li><li>
<div class="">открывать форму внешней обработки. <br>В форму передается ссылка на редактируемую табличную часть.</div></li></ol></li><li>
<div class="">В отличие от Варианта 1, форма не посылает оповещение, а содержит метод, который по окончании редактирования заполнит переданную табличную часть.</div></li></ol></body></html>