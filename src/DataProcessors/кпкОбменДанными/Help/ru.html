<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:v="urn:schemas-microsoft-com:vml"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 9.00.8112.16448"></meta></head><body>
<h1>Обработка "Обмен данными с мобильными устройствами"</h1>
<p class="Usual">Данная обработка предназначена для двухстороннего обмена данными с мобильными приложениями "Агент+" версии 1.5 и "Агент Плюс: Мобильная торговля", установленными на мобильных устройствах (далее МУ). </p>
<p class="Usual">Обмен производится при помощи внешней компоненты "APPlus.dll", обеспечивающей передачу данных с рабочего компьютера  на МУ и обратно. Так же обязательно должна быть установлена программа "Microsoft ActiveSync", иначе компонента "APPlus.dll" не загрузится (установка ПО "Microsoft ActiveSync" обязательно для операционных систем Windows версий не выше XP). </p>
<p class="Usual">Поддерживается также обмен данными между МУ и ИБ 1С:Предприятия посредством электронной почты или посредством FTP-сервера (любой из этих способов применяется при мобильном обмене данными). Обмен через почту может осуществляться в 2-х режимах (режим использования почтового клиента выбирается в на форме <a href="../idn0">"Настройка параметров аботы с мобильным приложением"</a>):</p>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr">
<p class="Usual">1. Использование встроенного почтового клиента 1С:Предприятия.</p>
<p class="Usual">2. Использование почтового клиента операционной системы. Для этого необходимо, чтобы на компьютере по умолчанию был установлен почтовый клиент "Outlook Express" или "Outlook" (предпочтительней "Outlook Express"), для первого запуска сеанса работы с почтой желательно подключиться к Интернет. </p></blockquote>
<p class="Usual">На форме обработки присутствуют две или три вкладки в зависимости от указанных настроек на форме: вкладки "Обмен данными" и "Настройки" присутствуют постоянно, третья вкладка может появляться в зависимости от выбранного значения в поле "Способ обмена", например, при указании способа обмене посредством электронной почты появляется закладка "Почта".</p>
<p class="Usual"> </p>
<p class="Usual">Кнопки "Выгрузить" и "Загрузить" предназначены соответственно для выгрузки данных из ЦБД в МУ и загрузки данных в ЦБД из МУ. При нажатии на кнопку "Закрыть" закрывается окно обработки. </p>
<p class="Usual">При нажатии на кнопку "Настройка" запускается обработка <a href="../idn0">"Настройка параметров работы с мобильным приложением"</a>  , с помощью которой можно произвести необходимые настройки подключенного устройства.</p>
<h3>Вкладка "Обмен данными"</h3>
<p class="Usual">В поле «Агент» выбирается торговый агент (пользователь МУ), с устройством которого в текущий момент осуществляется обмен данными.</p>
<p class="Usual">Если МУ торгового агента подключено к компьютеру напрямую (через USB-кабель), то программа позволяет автоматически определить подключенного агента - для этого предназначена кнопка "=". </p>
<p class="Usual">В выпадающем списке «Способ обмена» необходимо выбрать, каким способом производится в текущий момент обмен данными между компьютером и МУ. Обмен данными может происходить через:</p>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr">
<ul><li>
<div>Прямое подключение. Когда МУ подключено к ЦБД напрямую (например, через USB-соединения, Bluetooth или Wi-Fi). </div>
</li><li>
<div>Агент Плюс СОД. Способ обмена через службу "Агент Плюс СОД". Параметры службы задаются на форме <a href="../idn0">"</a><a href="../idn0">Настройка параметров работы с мобильным приложением"</a>, а также в регистре сведений "<a href="InformationRegister.кпкСведенияАгента/Help">Сведения агента"</a> для каждого агента.</div>
</li><li>
<div>
<div>FTP-сервер. Обмен данными в этом случае происходит через FTP-сервер, параметры которого задаются на форме <a href="../idn0">"</a><a href="../idn0">Настройка параметров работы с мобильным приложением"</a>  и для каждого агента в регистре сведений "<a href="InformationRegister.кпкСведенияАгента/Help">Сведения агента".</a> </div></div>
</li><li>
<div>
<div>
<div>Электронная почта. Файлы выгрузки и загрузки будут передаваться через электронную почту. Параметры для электронной почты настраиваются для каждого агента в регистре сведений "<a href="InformationRegister.кпкСведенияАгента/Help">Сведения агента"</a>  и непосредственно в самом МУ. Для корректной работы с почтой, необходимо, чтобы на компьютере по умолчанию был установлен почтовый клиент "Outlook Express" или "Outlook" (предпочтительней "Outlook Express"), для первого запуска сеанса работы с почтой желательно подключиться к сети Интернет. </div></div></div></li></ul></blockquote>
<p class="Usual">По умолчанию значение реквизита "Способ обмена" берется из константы "Способ обмена", которая задана на форме <a href="../idn0">"Настройка параметров аботы с мобильным приложением"</a>.</p>
<p class="Usual">В поле "Вид выгрузки" выбирается вид выгружаемых данных. Он может принимать следующие значения:</p>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr">
<ul><li>
<div>Все данные (с расчетом истории продаж). Выгружаются из ЦБД все данные, включая расчет истории продаж товаров для каждого контрагента. </div>
</li><li>
<div>Все данные (история продаж из автовыгрузки). Выгружаются из ЦБД все данные, но история продаж товаров для каждого контрагента берется из файла автовыгрузки, сформированного при выгрузке данных при варианте выгрузки "Только история продаж". Этот тип выгрузки предназначен для уменьшения времени обработки больших объемов данных - в этом случае будут выгружаться не вся история продаж, а только те данные, которых не существует в файле автовыгрузки.</div>
</li><li>
<div>
<div>Только история продаж.  При этом обработка запускает расчет истории продаж для каждого торгового агента и помещает результаты в промежуточные файлы. В дальнейшем при выгрузке данных в МУ эти файлы будут автоматически включены в выгрузку данных.</div></div>
</li><li>
<div>
<div>
<div>Только запрошенные данные. Выгружаются данные, запрошенные агентом из МУ.</div></div></div></li></ul></blockquote>
<p class="Usual">Гиперссылка "Открыть список "Загруженные документы", расположенная на форме, предназначена для отображения списка загруженных документо за текущий день по указанному агенту. </p>
<p class="Usual">При нажатии на гиперссылку "Сформировать отчет "Журнал обмена данными" формируется отчет "Журнал обмена данными с мобильными устройствами" за текущий день для указанному агенту.</p>
<h3>Вкладка "Настройки"</h3>
<p class="Usual">При выборе флажка "Стартовые номера" для выгрузки в МУ подготавливается список стартовых номеров нумераторов документов. Для ПО "Агент+ Стандарт" автонумерация документов в МУ необязательна (номера документов, созданных в МУ, могут присваиваться в 1С: Предприятии автоматически после их загрузки в базу), но в "Агент+ Инвент" использование нумераторов является обязательным условием (как минимум для документов "Реализация", "Счет-Фактура" и "Кассовый ордер").</p>
<p class="Usual">Выбирать этот флажок следует только при необходимости установки новых стартовых номеров нумераторов документов. При выбранном флажке становится доступна закладка окна "Стартовые номера", в которой указываются стартовые номера нумераторов документов и здесь же (при необходимости) можно сменить стартовый номер у любого из нумераторов. </p>
<p class="Usual">Флаг "Обновлять документы" предназначен для обновления информации в документах, которые уже были раньше загружены в центральную базу данных (ЦБД), например, с целью дозаказа или уточнения каких-либо документов на месте у клиента.</p>
<p class="Usual">Флаг "Товары без остатков" означет, что в МУ будут также выгружены товары, по которым нет остатков по складам (по умолчанию выгружаются только товары с остатками на складах).</p>
<p class="Usual">Флаг "Учитывать резервы" - при выгрузке остатков номенклатуры будут учитываться товары, числищиеся в резерве.</p>
<p class="Usual">Флаг "Использовать zip-архивы" указывает будет ли использоваться архивирование файлов при обмене данными или нет. При этом в МУ также должен быть выставлен или сброшен флажок в настройках обмена.</p>
<p class="Usual">Флаг "Обновить остатки по мобильному складу" означает, что при выгрузке данных в МУ в ЦБД будет создан виртуальный документ инвентаризации, который будет перенесен в МУ. В результате будут обновлены текущие остатки по передвижному складу агента.</p>
<p class="Usual">Флаг "Выгружать картинки товаров" указывает, будут ли выгружены файлы с картинками товаров в МУ, хранящихся в БД 1С:Предприятия в справочнике "Номенклатура".</p>
<p class="Usual">Флаг "Выгружать задания" означает, что в МУ будут выгружены задания для текущего агента, сформированные с помощью документов <a href="Document.кпкЗаданиеАгента/Help">"Задание агента"</a>. Выгружаются задания за указанный период, по умолчанию период заполняется текущим днем.</p>
<p class="Usual">Если выгрузка производится для приложения "Агент Плюс: Мобильная торговля", то становится доступным флажок "Очищать справочники перед загрузкой". Если он включен, то перед загрузкой файла обмена в МУ предварительно будут очищены основные справочники в базе МУ (контрагенты, договоры, торговые точки, номенклатура). Таким образом, в МУ всегда будут отображаться актуальные данные. Если же флажок не включен, то данные в справочники будут дозагружаться каждый раз в результате загрузки файла обмена.</p>
<p class="Usual">В поле "Реализация по заявкам" выбирается то, каким способом будут загружаться заявки из МУ в ЦБД: </p>
<li>
<div>Не создавать документ реализации. При загрузке заявок из МУ будут создаваться документы <a href="Document.ЗаказПокупателя/Help">"Заказ покупателя"</a> в ЦБД. </div>
</li><li>
<div>Создавать на основании заявки (метод "Заполнить"). При загрузке заявок из МУ будут создаваться документы <a href="Document.ЗаказПокупателя/Help">"Заказ покупателя"</a>, а также на основании этих загруженных заявок будут созданы документы <a href="Document.РеализацияТоваровУслуг/Help">"Реализация товаров и услуг"</a>.</div>
</li><li>
<div>Перенос содержимого заявки в реализацию. При этом способе загрузки документы <a href="Document.ЗаказПокупателя/Help">"Заказ покупателя"</a> создаваться не будут, а сразу будут созданы документы <a href="Document.РеализацияТоваровУслуг/Help">"Реализация товаров и услуг"</a></div>
<p></p>
<h4>ВНИМАНИЕ !!!</h4>
<p class="Usual">В случае, если торговый агент, для которого выгружаются данные, работает как продавец при операциях "торговли с колес" (ТСК), т.е. продает товар с борта машины и оформляет все документы купли-продажи, то для такого агента ВЫГРУЖАЮТСЯ ДВА ОСТАТКА ТОВАРА - остаток товара ПО ФИРМЕ и остаток товара В МАШИНЕ.</p>
<p class="Usual">Первый остаток используется агентом для выписки счетов или оформления заявок на поставку товаров клиентам с учетом остатков в фирме. Так же этот остаток может учитываться агентом при оформлении заявок на погрузку товара в машину. Второй остаток используется агентом в операциях "торговли с колес", т.е. при оформлении документов продажи товарв с борта машины или при оформлении документов выгрузки товаров с машины на склад фирмы. Первый остаток выгружается в МУ при выгрузке основного справочника "Номенклатура". Второй остаток выгружается в МУ только в виде документов "Перемещение", которые автоматически проводятся в МУ сразу после их загрузки в БД мобильного приложения на МУ.</p>
<p class="Usual"> </p>
<p class="Usual"><strong>Примечание: </strong>при прямом подключении устройства к ПК в том случае, если по какой-либо причине обаботка не может определить подключение, то в результате выгрузки или загрузки данных будет предложена возможность выгрузки/загрузки данных через файл на локальном ПК. Такой вариант удобен, например, при использовании терминального режима работы с системой 1С:Предприятия, если нужно передать или загрузить данные из БД 1С, но нет возможности подключиться к БД 1С напрямую с локального ПК.</p>
<p class="Usual"> </p></li></body></html>